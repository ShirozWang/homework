(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{a2e7:function(e,t,s){"use strict";s("f9a9")},a55b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"login"}},[e.register?e._e():t("div",{staticClass:"login-wrapper"},[t("div",{staticClass:"header"},[e._v("登录")]),t("div",{staticClass:"form-wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input-item",attrs:{type:"text",name:"username",placeholder:"邮箱"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-item",attrs:{type:"password",name:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("div",{staticClass:"btn",on:{click:function(t){return e.login()}}},[e._v("登录")])]),t("div",{staticClass:"msg"},[e._v(" 没有账号？ "),t("a",{staticClass:"sign-up",attrs:{href:"#"},on:{click:function(t){return e.turnToRegister()}}},[e._v("注册")])])]),e.register?t("div",{staticClass:"login-wrapper"},[t("div",{staticClass:"header"},[e._v("注册")]),t("div",{staticClass:"form-wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"input-item",attrs:{type:"text",name:"username",placeholder:"邮箱"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input-item",attrs:{type:"password",name:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"input-item",attrs:{type:"number",name:"code",placeholder:"验证码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),t("el-button",{staticStyle:{width:"120px"},attrs:{disabled:this.disabled},on:{click:function(t){return e.getCode()}}},[e._v(e._s(e.buttonText))]),t("div",{staticClass:"btn",on:{click:function(t){return e.signUp()}}},[e._v("注册")])],1),t("div",{staticClass:"msg"},[e._v(" 已有账号？ "),t("a",{staticClass:"sign-up",attrs:{href:"#"},on:{click:function(t){return e.turnToLogin()}}},[e._v("登录")])])]):e._e()])},n=[],r=s("ac09");function o(e){const t=new FormData;for(const s in e)e.hasOwnProperty(s)&&(e[s]?e[s].constructor===Array?e[s][0]?e[s][0].constructor===Object?t.append(s,JSON.stringify(e[s])):e[s].forEach((e,a)=>{t.append(s+`[${a}]`,e)}):t.append(s+"[]",""):e[s].constructor===Object?t.append(s,JSON.stringify(e[s])):t.append(s,e[s]):0===e[s]?t.append(s,0):t.append(s,""));return t}var i={name:"Login",data(){return{register:!1,username:"",password:"",code:"",disabled:!1,countdown:60}},computed:{buttonText(){return 60==this.countdown?"获取验证码":this.countdown+"s后获取"}},methods:{login(){let e=this;o({username:this.username,password:this.password,rememberMe:!0});this.$.ajax({type:"post",url:"http://localhost:8098/api/auth/login",async:!0,data:{username:this.username,password:this.password,rememberMe:!0},dataType:"json",xhrFields:{withCredentials:!0},success:function(t){403==t.code?e.$message({message:t.reason,type:"error",duration:2e3}):e.$request({url:"/api/user/info"}).then(t=>{e.$store.commit("setUserInfo",t.data),window.localStorage.setItem("userInfo",JSON.stringify(t.data)),Object(r["c"])("username",e.username,6e4),e.$router.replace("/home")})}})},signUp(){let e=o({email:this.username,password:this.password,verify:this.code}),t=this,s=new XMLHttpRequest;s.open("POST","http://localhost:8098/api/auth/register",!0),s.onreadystatechange=function(){if(4===s.readyState&&200===s.status){let e=JSON.parse(s.response);500==e.code?t.$message({message:"请输入正确的邮箱",type:"error",duration:2e3}):403==e.code?t.$message({message:"请输入正确的验证码",type:"error",duration:2e3}):(t.$message({message:"注册成功, 正在跳转回登录页面",type:"success",duration:2e3}),setTimeout(()=>{t.register=!1}))}else 4===s.readyState&&200!==s.status&&alert("网络错误，请稍后重试")},s.send(e)},getCode(){this.$request({url:"/api/auth/verify-code?email="+this.username}).then(e=>{500==e.code&&this.$message({message:"请输入正确的邮箱",type:"error",duration:2e3})}),this.disabled=!0;let e=setInterval(()=>{this.countdown--,0==this.countdown&&(this.disabled=!1,this.countdown=60,clearInterval(e))},1e3)},turnToRegister(){this.register=!0},turnToLogin(){this.register=!1}},created(){}},u=i,c=(s("a2e7"),s("2877")),d=Object(c["a"])(u,a,n,!1,null,null,null);t["default"]=d.exports},ac09:function(e,t,s){"use strict";function a(e,t,s){var a=new Date;a.setSeconds(a.getSeconds()+s),document.cookie=e+"="+escape(t)+"; expires="+a.toGMTString()}function n(e){if(document.cookie.length>0){let t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;let s=document.cookie.indexOf(";",t);return-1==s&&(s=document.cookie.length),unescape(document.cookie.substring(t,s))}}return""}function r(e){a(e,"",-1)}s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return r}))},f9a9:function(e,t,s){}}]);
//# sourceMappingURL=about.86525cee.js.map